<% if message.present? %>
  <%
    # Determine notification styling based on type
    notification_type = local_assigns[:type] || "success"

    case notification_type
    when "error"
      bg_color = "bg-red-100"
      text_color = "text-red-700"
      hover_bg = "hover:bg-red-200"
      hover_text = "hover:text-red-900"
    when "warning"
      bg_color = "bg-yellow-100"
      text_color = "text-yellow-700"
      hover_bg = "hover:bg-yellow-200"
      hover_text = "hover:text-yellow-900"
    else # success
      bg_color = "bg-green-100"
      text_color = "text-green-700"
      hover_bg = "hover:bg-green-200"
      hover_text = "hover:text-green-900"
    end
  %>
  <!-- Turbo notification container with relative positioning for absolute close button -->
  <p class="notice <%= bg_color %> <%= text_color %> rounded-lg text-2xl relative"
     style="padding: 1rem 3rem 1rem 2rem; position: relative;"
     data-controller="auto-dismiss"
     data-auto-dismiss-delay-value="5000">
    <%= message %>
    <% if local_assigns[:project_url].present? %>
      <a href="<%= project_url %>"
         class="inline-block ml-3 text-primary-600 hover:text-primary-800"
         data-turbo="false">
        <%= t('projects.messages.view_project_link') %>
      </a>
    <% end %>
    <!-- Close button positioned in top-right corner -->
    <button type="button"
            class="cursor-pointer <%= text_color %> <%= hover_text %> <%= hover_bg %> rounded-full p-1 transition-colors"
            style="position: absolute; top: 0.5rem; right: 0.5rem;"
            data-action="click->auto-dismiss#dismiss"
            aria-label="Close notification">
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
      </svg>
    </button>
  </p>
<% end %>