<%# Remove the business row from the table using dom_id %>
<%= turbo_stream.remove dom_id(@business) %>

<%# Update flash messages container with success notification %>
<%= turbo_stream.update "flash-messages" do %>
  <%= render "partials/turbo_notification", message: t('businesses.messages.deleted', name: @business.name) %>
<% end %>

<%# If the deleted business was the current business, reload the page to update navbar/sidebar %>
<% if @was_current_business %>
  <%= turbo_stream.append "flash-messages" do %>
    <script>
      // Reload page after a short delay to allow flash message to display
      setTimeout(() => {
        window.location.reload();
      }, 1500);
    </script>
  <% end %>
<% end %>
