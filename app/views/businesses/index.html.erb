<%
  model_name = "Businesses"
  paths = {
    businesses: businesses_path,
    new_business: new_business_path,
    show_business: ->(business) { business_path(business) },
    edit_business: ->(business) { edit_business_path(business) },
    delete_business: ->(business) { business_path(business) },
    select_business: ->(business) { select_business_path(business) }
  }

  # Build currency options for inline editing
  currency_options = Business.currencies.keys.each_with_object({}) do |key, hash|
    hash[key] = key.capitalize
  end
%>
<%= render 'partials/header1',
           title: t('sidebar.businesses'),
           model_name: model_name,
           search_path: paths[:businesses],
           new_path: paths[:new_business],
           additional_crumbs: [

           ] %>
<%= render 'partials/table',
           collection: @businesses,
           columns: {
             t('businesses.index.columns.name') => ->(business) {
               content_tag(:div, business.name,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "name",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.name,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   inline_edit_required_value: true,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.address') => ->(business) {
               content_tag(:div, business.address,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "address",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.address,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.phone_number') => ->(business) {
               content_tag(:div, business.phone_number,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "phone_number",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.phone_number,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.vat_number') => ->(business) {
               content_tag(:div, business.vat_number,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "vat_number",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.vat_number,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.registration_number') => ->(business) {
               content_tag(:div, business.registration_number,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "registration_number",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.registration_number,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.owner_first_name') => ->(business) {
               content_tag(:div, business.owner_first_name,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "owner_first_name",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.owner_first_name,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.owner_last_name') => ->(business) {
               content_tag(:div, business.owner_last_name,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "owner_last_name",
                   inline_edit_type_value: "text",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.owner_last_name,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             },
             t('businesses.index.columns.currency') => ->(business) {
               content_tag(:div, business.currency&.capitalize,
                 data: {
                   controller: "inline-edit",
                   inline_edit_model_value: "business",
                   inline_edit_field_value: "currency",
                   inline_edit_type_value: "select",
                   inline_edit_url_value: business_path(business),
                   inline_edit_original_value: business.currency,
                   inline_edit_record_updated_at_value: business.updated_at.iso8601,
                   inline_edit_options_value: currency_options.to_json,
                   action: "dblclick->inline-edit#activate"
                 },
                 class: "cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600 px-2 py-1 rounded",
                 title: "Double-click to edit"
               )
             }
           },
           turbo_frame_id: "businesses-frame",
           model_name: model_name,
           search_path: paths[:businesses],
           new_path: paths[:new_business],
           show_path: paths[:show_business],
           edit_path: paths[:edit_business],
           delete_path: paths[:delete_business],
           select_path: paths[:select_business]
            %>
